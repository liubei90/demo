<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Document</title>
  <style>
    td {
      padding: 10px;
    }

    .mouth-content {
      margin: 20px 10px;
    }
    .mouth-content td {
      white-space: nowrap;
    }


    .section-content {
      margin: 20px 10px;
    }
    .section-content td {
      white-space: nowrap;
    }
  </style>
  <script src="./index.js"></script>
</head>
<body>
  <div id="app">
    
  </div>

  <div class="section-content">
    <div>科室按月排班</div>
    <div id="section"></div>
  </div>

  <script>
    (function() {
      function createTable(items, mouth) {
        var trStr = '';
        for (var i = 0; i < items.length; i++) {
          var item = items[i];
          trStr += `
          <tr>
            <td>${item['name']}</td>
            <td>${item['depart']}</td>
          </tr>
          `;
        }

        var t = `
        <div>第${mouth}个月</div>
        <table border="1" cellspacing="0">
          <tr>
            <th>姓名</th>
            <th>科室</th>
          </tr>
          ${trStr}
        </table>`

        var d = document.createElement('div');
        d.classList.add('mouth-content');
        d.innerHTML = t;

        return d;
      }

      var tableData = [];
      for (var i = 0; i < mouth_count; i++) {
        tableData[i] = [];
        for (var si = 0; si < students.length; si++ ) {
          var name = students[si];
          var item = {
            name: name,
            depart: students_info[name]['sections'][i],
          }
          tableData[i].push(item);
        }
      }

      var app = document.querySelector('#app');

      for (var i = 0; i < tableData.length; i++) {
        app.append(createTable(tableData[i], i+1));
      }
    })();

  </script>

  <script>
    (function() {
      function createTR(item) {
        var mouths = item.mouths;
        var section = item.section;
        var tdStr = '';

        for (var i = 0; i < mouths.length; i++) {
          tdStr += `<td>${mouths[i]}</td>`
        }

        return `
        <tr>
            <td>${section}</td>
            ${tdStr}
          </tr>
        `;
      }

      var sections = {};
      for (var i = 0; i < mouth_count; i++) {
        var section_student = section_students[i];
        var keys = Object.keys(section_student);

        for (var j = 0; j < keys.length; j++) {
          var section = keys[j];
          var students = section_student[section];

          if (!sections[section]) {
            sections[section] = [];
          }

          sections[section][i] = students;
        }
      }

      var trStr = '';
      var keys = Object.keys(sections);

      for (var i = 0; i < keys.length; i++) {
        trStr += createTR({
          section: keys[i],
          mouths: sections[keys[i]],
        })
      }

      var t = `
        <table border="1" cellspacing="0">
          <tr>
            <th>科室</th>
            <th>第一月</th>
            <th>第二月</th>
            <th>第三月</th>
            <th>第四月</th>
            <th>第五月</th>
            <th>第六月</th>
            <th>第七月</th>
            <th>第八月</th>
            <th>第九月</th>
            <th>第十月</th>
          </tr>
          ${trStr}
        </table>`

        var d = document.querySelector('#section');
        d.innerHTML = t;
    })();
  </script>
</body>
</html>